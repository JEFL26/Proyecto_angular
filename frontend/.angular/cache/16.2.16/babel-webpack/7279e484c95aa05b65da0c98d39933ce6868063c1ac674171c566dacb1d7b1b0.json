{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_p_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.errorMessage);\n  }\n}\nexport class LoginComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    // Modelo del formulario\n    this.loginData = {\n      email: '',\n      password: ''\n    };\n    // Estados del componente\n    this.loading = false;\n    this.errorMessage = '';\n  }\n  /**\n   * Maneja el submit del formulario de login\n   */\n  onLogin() {\n    // Validaciones básicas\n    if (!this.loginData.email || !this.loginData.password) {\n      this.errorMessage = 'Por favor completa todos los campos';\n      return;\n    }\n    this.loading = true;\n    this.errorMessage = '';\n    // Llamada al servicio de autenticación\n    this.authService.login(this.loginData).subscribe({\n      next: response => {\n        // Éxito: redirigir al home\n        this.loading = false;\n        this.router.navigate(['/home']);\n      },\n      error: error => {\n        // Error: mostrar mensaje\n        this.loading = false;\n        if (error.status === 401) {\n          this.errorMessage = 'Email o contraseña incorrectos';\n        } else {\n          this.errorMessage = 'Error al iniciar sesión. Intenta nuevamente';\n        }\n      }\n    });\n  }\n  /**\n   * Navega a la página de registro\n   */\n  goToRegister() {\n    this.router.navigate(['/register']);\n  }\n  /**\n   * Navega al home\n   */\n  goToHome() {\n    this.router.navigate(['/home']);\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 16,\n      vars: 4,\n      consts: [[1, \"login-container\"], [3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [\"type\", \"email\", \"name\", \"email\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 3, \"disabled\"], [\"class\", \"error\", 4, \"ngIf\"], [3, \"click\"], [1, \"error\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Iniciar sesi\\u00F3n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 1, 2);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.onLogin();\n          });\n          i0.ɵɵelementStart(5, \"label\");\n          i0.ɵɵtext(6, \"Email:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"input\", 3);\n          i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_7_listener($event) {\n            return ctx.loginData.email = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"label\");\n          i0.ɵɵtext(9, \"Contrase\\u00F1a:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"input\", 4);\n          i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_10_listener($event) {\n            return ctx.loginData.password = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"button\", 5);\n          i0.ɵɵtext(12, \"Entrar\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(13, LoginComponent_p_13_Template, 2, 1, \"p\", 6);\n          i0.ɵɵelementStart(14, \"a\", 7);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_14_listener() {\n            return ctx.goToRegister();\n          });\n          i0.ɵɵtext(15, \"Crear cuenta\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngModel\", ctx.loginData.email);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngModel\", ctx.loginData.password);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        }\n      },\n      dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n      styles: [\".login-container[_ngcontent-%COMP%] {\\n  width: 300px;\\n  margin: 50px auto;\\n  text-align: left;\\n}\\nlabel[_ngcontent-%COMP%] {\\n  display: block;\\n  margin-top: 10px;\\n}\\ninput[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 5px;\\n}\\n.error[_ngcontent-%COMP%] {\\n  color: red;\\n  margin-top: 10px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLGNBQWM7RUFDZCxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7QUFDQTtFQUNFLFVBQVU7RUFDVixnQkFBZ0I7QUFDbEIiLCJzb3VyY2VzQ29udGVudCI6WyIubG9naW4tY29udGFpbmVyIHtcclxuICB3aWR0aDogMzAwcHg7XHJcbiAgbWFyZ2luOiA1MHB4IGF1dG87XHJcbiAgdGV4dC1hbGlnbjogbGVmdDtcclxufVxyXG5sYWJlbCB7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxufVxyXG5pbnB1dCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcGFkZGluZzogNXB4O1xyXG59XHJcbi5lcnJvciB7XHJcbiAgY29sb3I6IHJlZDtcclxuICBtYXJnaW4tdG9wOiAxMHB4O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r1","errorMessage","LoginComponent","constructor","authService","router","loginData","email","password","loading","onLogin","login","subscribe","next","response","navigate","error","status","goToRegister","goToHome","ɵɵdirectiveInject","i1","AuthService","i2","Router","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_form_ngSubmit_3_listener","LoginComponent_Template_input_ngModelChange_7_listener","$event","LoginComponent_Template_input_ngModelChange_10_listener","ɵɵtemplate","LoginComponent_p_13_Template","LoginComponent_Template_a_click_14_listener","ɵɵproperty"],"sources":["/home/feliban26/estudio_angular/proyecto_reservas/frontend/src/app/components/login/login.component.ts","/home/feliban26/estudio_angular/proyecto_reservas/frontend/src/app/components/login/login.component.html"],"sourcesContent":["// frontend/src/app/components/login/login.component.ts\r\nimport { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { UserLogin } from '../../models/user.model';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent {\r\n  // Modelo del formulario\r\n  loginData: UserLogin = {\r\n    email: '',\r\n    password: ''\r\n  };\r\n\r\n  // Estados del componente\r\n  loading = false;\r\n  errorMessage = '';\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  /**\r\n   * Maneja el submit del formulario de login\r\n   */\r\n  onLogin(): void {\r\n    // Validaciones básicas\r\n    if (!this.loginData.email || !this.loginData.password) {\r\n      this.errorMessage = 'Por favor completa todos los campos';\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    this.errorMessage = '';\r\n\r\n    // Llamada al servicio de autenticación\r\n    this.authService.login(this.loginData).subscribe({\r\n      next: (response) => {\r\n        // Éxito: redirigir al home\r\n        this.loading = false;\r\n        this.router.navigate(['/home']);\r\n      },\r\n      error: (error) => {\r\n        // Error: mostrar mensaje\r\n        this.loading = false;\r\n        if (error.status === 401) {\r\n          this.errorMessage = 'Email o contraseña incorrectos';\r\n        } else {\r\n          this.errorMessage = 'Error al iniciar sesión. Intenta nuevamente';\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Navega a la página de registro\r\n   */\r\n  goToRegister(): void {\r\n    this.router.navigate(['/register']);\r\n  }\r\n\r\n  /**\r\n   * Navega al home\r\n   */\r\n  goToHome(): void {\r\n    this.router.navigate(['/home']);\r\n  }\r\n}","<div class=\"login-container\">\r\n  <h2>Iniciar sesión</h2>\r\n\r\n  <form (ngSubmit)=\"onLogin()\" #loginForm=\"ngForm\">\r\n    <label>Email:</label>\r\n    <input type=\"email\" name=\"email\" [(ngModel)]=\"loginData.email\" required />\r\n\r\n    <label>Contraseña:</label>\r\n    <input type=\"password\" name=\"password\" [(ngModel)]=\"loginData.password\" required />\r\n\r\n    <button type=\"submit\" [disabled]=\"loading\">Entrar</button>\r\n  </form>\r\n\r\n  <p class=\"error\" *ngIf=\"errorMessage\">{{ errorMessage }}</p>\r\n\r\n  <a (click)=\"goToRegister()\">Crear cuenta</a>\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}