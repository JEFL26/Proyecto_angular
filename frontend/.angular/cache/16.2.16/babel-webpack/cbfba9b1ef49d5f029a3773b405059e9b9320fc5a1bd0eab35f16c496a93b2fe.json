{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"span\", 25);\n    i0.ɵɵtext(2, \"\\u26A0\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nfunction LoginComponent_span_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Iniciar Sesi\\u00F3n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_span_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Iniciando sesi\\u00F3n...\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoginComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    // Modelo del formulario\n    this.loginData = {\n      email: '',\n      password: ''\n    };\n    // Estados del componente\n    this.loading = false;\n    this.errorMessage = '';\n  }\n  /**\n   * Maneja el submit del formulario de login\n   */\n  onLogin() {\n    // Validaciones básicas\n    if (!this.loginData.email || !this.loginData.password) {\n      this.errorMessage = 'Por favor completa todos los campos';\n      return;\n    }\n    this.loading = true;\n    this.errorMessage = '';\n    // Llamada al servicio de autenticación\n    this.authService.login(this.loginData).subscribe({\n      next: response => {\n        this.loading = false;\n        // Guarda token\n        localStorage.setItem('access_token', response.access_token);\n        // Si el usuario es admin, ir a /admin; si no, a /home\n        const decodedToken = JSON.parse(atob(response.access_token.split('.')[1]));\n        if (decodedToken.role === 1 || decodedToken.is_admin) {\n          this.router.navigate(['/admin']);\n        } else {\n          this.router.navigate(['/home']);\n        }\n      },\n      error: error => {\n        // Error: mostrar mensaje\n        this.loading = false;\n        if (error.status === 401) {\n          this.errorMessage = 'Email o contraseña incorrectos';\n        } else {\n          this.errorMessage = 'Error al iniciar sesión. Intenta nuevamente';\n        }\n      }\n    });\n  }\n  /**\n   * Navega a la página de registro\n   */\n  goToRegister() {\n    this.router.navigate(['/register']);\n  }\n  /**\n   * Navega al home\n   */\n  goToHome() {\n    this.router.navigate(['/home']);\n  }\n  static {\n    this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 42,\n      vars: 8,\n      consts: [[1, \"login-page\"], [1, \"login-container\"], [1, \"back-button\", 3, \"click\"], [1, \"login-card\"], [1, \"login-header\"], [1, \"logo-circle\"], [1, \"logo-icon\"], [\"class\", \"alert alert-error\", 4, \"ngIf\"], [1, \"login-form\", 3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"email\"], [1, \"label-icon\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"placeholder\", \"tu@email.com\", \"required\", \"\", 1, \"form-input\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\", \"required\", \"\", 1, \"form-input\", 3, \"ngModel\", \"disabled\", \"ngModelChange\"], [1, \"form-footer\"], [\"href\", \"#\", 1, \"forgot-password\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-block\", 3, \"disabled\"], [4, \"ngIf\"], [1, \"divider\"], [1, \"register-section\"], [1, \"register-text\"], [1, \"btn\", \"btn-outline\", \"btn-block\", 3, \"click\"], [1, \"alert\", \"alert-error\"], [1, \"alert-icon\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_2_listener() {\n            return ctx.goToHome();\n          });\n          i0.ɵɵtext(3, \" \\u2190 Volver al inicio \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"span\", 6);\n          i0.ɵɵtext(8, \"\\uD83D\\uDC85\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"h1\");\n          i0.ɵɵtext(10, \"Iniciar Sesi\\u00F3n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"p\");\n          i0.ɵɵtext(12, \"Accede a tu cuenta para gestionar tus reservas\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(13, LoginComponent_div_13_Template, 5, 1, \"div\", 7);\n          i0.ɵɵelementStart(14, \"form\", 8, 9);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_14_listener() {\n            return ctx.onLogin();\n          });\n          i0.ɵɵelementStart(16, \"div\", 10)(17, \"label\", 11)(18, \"span\", 12);\n          i0.ɵɵtext(19, \"\\uD83D\\uDCE7\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(20, \" Correo Electr\\u00F3nico \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"input\", 13);\n          i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_21_listener($event) {\n            return ctx.loginData.email = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 10)(23, \"label\", 14)(24, \"span\", 12);\n          i0.ɵɵtext(25, \"\\uD83D\\uDD12\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(26, \" Contrase\\u00F1a \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"input\", 15);\n          i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_27_listener($event) {\n            return ctx.loginData.password = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(28, \"div\", 16)(29, \"a\", 17);\n          i0.ɵɵtext(30, \"\\u00BFOlvidaste tu contrase\\u00F1a?\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(31, \"button\", 18);\n          i0.ɵɵtemplate(32, LoginComponent_span_32_Template, 2, 0, \"span\", 19);\n          i0.ɵɵtemplate(33, LoginComponent_span_33_Template, 2, 0, \"span\", 19);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(34, \"div\", 20)(35, \"span\");\n          i0.ɵɵtext(36, \"o\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(37, \"div\", 21)(38, \"p\", 22);\n          i0.ɵɵtext(39, \" \\u00BFNo tienes cuenta? \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(40, \"button\", 23);\n          i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_40_listener() {\n            return ctx.goToRegister();\n          });\n          i0.ɵɵtext(41, \" Crear una cuenta nueva \");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(15);\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngModel\", ctx.loginData.email)(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.loginData.password)(\"disabled\", ctx.loading);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", ctx.loading || !_r1.valid);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        }\n      },\n      dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm],\n      styles: [\"\\n\\n\\n.login-page[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  min-height: 100vh;\\n  background: #f4f6f8;\\n  padding: 20px;\\n}\\n\\n.login-container[_ngcontent-%COMP%] {\\n  width: 100%;\\n  max-width: 380px;\\n}\\n\\n.back-button[_ngcontent-%COMP%] {\\n  background: transparent;\\n  border: none;\\n  color: #555;\\n  font-size: 14px;\\n  cursor: pointer;\\n  margin-bottom: 15px;\\n}\\n\\n.login-card[_ngcontent-%COMP%] {\\n  background: #fff;\\n  padding: 30px 25px;\\n  border-radius: 16px;\\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\\n}\\n\\n.login-header[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 25px;\\n}\\n\\n.logo-circle[_ngcontent-%COMP%] {\\n  width: 60px;\\n  height: 60px;\\n  margin: 0 auto 10px;\\n  border-radius: 50%;\\n  background: #e0e7ff;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: 28px;\\n}\\n\\n.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%] {\\n  font-size: 22px;\\n  margin: 0;\\n  color: #333;\\n}\\n\\n.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  color: #777;\\n  margin-top: 5px;\\n}\\n\\n.alert[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  background: #fdecea;\\n  color: #b71c1c;\\n  border-radius: 8px;\\n  padding: 10px;\\n  margin-bottom: 15px;\\n  font-size: 14px;\\n}\\n\\n.alert-icon[_ngcontent-%COMP%] {\\n  margin-right: 6px;\\n}\\n\\n.form-group[_ngcontent-%COMP%] {\\n  margin-bottom: 15px;\\n}\\n\\nlabel[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  font-weight: 500;\\n  font-size: 14px;\\n  margin-bottom: 6px;\\n  color: #333;\\n}\\n\\n.form-input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 8px 10px;\\n  border: 1px solid #ccc;\\n  border-radius: 6px;\\n  font-size: 14px;\\n}\\n\\n.form-input[_ngcontent-%COMP%]:disabled {\\n  background: #f0f0f0;\\n}\\n\\n.form-footer[_ngcontent-%COMP%] {\\n  text-align: right;\\n  margin-bottom: 15px;\\n}\\n\\n.forgot-password[_ngcontent-%COMP%] {\\n  font-size: 13px;\\n  color: #4f46e5;\\n  text-decoration: none;\\n}\\n\\n.forgot-password[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  width: 100%;\\n  padding: 10px;\\n  border-radius: 6px;\\n  font-size: 15px;\\n  cursor: pointer;\\n  border: none;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%] {\\n  background: #4f46e5;\\n  color: #fff;\\n}\\n\\n.btn-primary[_ngcontent-%COMP%]:disabled {\\n  background: #a5b4fc;\\n  cursor: not-allowed;\\n}\\n\\n.btn-outline[_ngcontent-%COMP%] {\\n  background: transparent;\\n  border: 1px solid #4f46e5;\\n  color: #4f46e5;\\n}\\n\\n.btn-outline[_ngcontent-%COMP%]:hover {\\n  background: #eef2ff;\\n}\\n\\n.divider[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  margin: 20px 0;\\n  font-size: 13px;\\n  color: #999;\\n}\\n\\n.divider[_ngcontent-%COMP%]::before, .divider[_ngcontent-%COMP%]::after {\\n  content: '';\\n  flex: 1;\\n  height: 1px;\\n  background: #ddd;\\n  margin: 0 10px;\\n}\\n\\n.register-section[_ngcontent-%COMP%] {\\n  text-align: center;\\n}\\n\\n.register-text[_ngcontent-%COMP%] {\\n  font-size: 14px;\\n  color: #555;\\n  margin-bottom: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDs7QUFFMUQ7RUFDRSxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLG1CQUFtQjtFQUNuQixpQkFBaUI7RUFDakIsbUJBQW1CO0VBQ25CLGFBQWE7QUFDZjs7QUFFQTtFQUNFLFdBQVc7RUFDWCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIsWUFBWTtFQUNaLFdBQVc7RUFDWCxlQUFlO0VBQ2YsZUFBZTtFQUNmLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLHlDQUF5QztBQUMzQzs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLG1CQUFtQjtFQUNuQixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsdUJBQXVCO0VBQ3ZCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsU0FBUztFQUNULFdBQVc7QUFDYjs7QUFFQTtFQUNFLGVBQWU7RUFDZixXQUFXO0VBQ1gsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsbUJBQW1CO0VBQ25CLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixRQUFRO0VBQ1IsZ0JBQWdCO0VBQ2hCLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsV0FBVztBQUNiOztBQUVBO0VBQ0UsV0FBVztFQUNYLGlCQUFpQjtFQUNqQixzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGNBQWM7RUFDZCxxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsZUFBZTtFQUNmLFlBQVk7QUFDZDs7QUFFQTtFQUNFLG1CQUFtQjtFQUNuQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsdUJBQXVCO0VBQ3ZCLHlCQUF5QjtFQUN6QixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsY0FBYztFQUNkLGVBQWU7RUFDZixXQUFXO0FBQ2I7O0FBRUE7O0VBRUUsV0FBVztFQUNYLE9BQU87RUFDUCxXQUFXO0VBQ1gsZ0JBQWdCO0VBQ2hCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsV0FBVztFQUNYLG1CQUFtQjtBQUNyQiIsInNvdXJjZXNDb250ZW50IjpbIi8qIGZyb250ZW5kL3NyYy9hcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5jb21wb25lbnQuY3NzICovXHJcblxyXG4ubG9naW4tcGFnZSB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIG1pbi1oZWlnaHQ6IDEwMHZoO1xyXG4gIGJhY2tncm91bmQ6ICNmNGY2Zjg7XHJcbiAgcGFkZGluZzogMjBweDtcclxufVxyXG5cclxuLmxvZ2luLWNvbnRhaW5lciB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWF4LXdpZHRoOiAzODBweDtcclxufVxyXG5cclxuLmJhY2stYnV0dG9uIHtcclxuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgY29sb3I6ICM1NTU7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG59XHJcblxyXG4ubG9naW4tY2FyZCB7XHJcbiAgYmFja2dyb3VuZDogI2ZmZjtcclxuICBwYWRkaW5nOiAzMHB4IDI1cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogMTZweDtcclxuICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxufVxyXG5cclxuLmxvZ2luLWhlYWRlciB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIG1hcmdpbi1ib3R0b206IDI1cHg7XHJcbn1cclxuXHJcbi5sb2dvLWNpcmNsZSB7XHJcbiAgd2lkdGg6IDYwcHg7XHJcbiAgaGVpZ2h0OiA2MHB4O1xyXG4gIG1hcmdpbjogMCBhdXRvIDEwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIGJhY2tncm91bmQ6ICNlMGU3ZmY7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIGZvbnQtc2l6ZTogMjhweDtcclxufVxyXG5cclxuLmxvZ2luLWhlYWRlciBoMSB7XHJcbiAgZm9udC1zaXplOiAyMnB4O1xyXG4gIG1hcmdpbjogMDtcclxuICBjb2xvcjogIzMzMztcclxufVxyXG5cclxuLmxvZ2luLWhlYWRlciBwIHtcclxuICBmb250LXNpemU6IDE0cHg7XHJcbiAgY29sb3I6ICM3Nzc7XHJcbiAgbWFyZ2luLXRvcDogNXB4O1xyXG59XHJcblxyXG4uYWxlcnQge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBiYWNrZ3JvdW5kOiAjZmRlY2VhO1xyXG4gIGNvbG9yOiAjYjcxYzFjO1xyXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG59XHJcblxyXG4uYWxlcnQtaWNvbiB7XHJcbiAgbWFyZ2luLXJpZ2h0OiA2cHg7XHJcbn1cclxuXHJcbi5mb3JtLWdyb3VwIHtcclxuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xyXG59XHJcblxyXG5sYWJlbCB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogNnB4O1xyXG4gIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IDZweDtcclxuICBjb2xvcjogIzMzMztcclxufVxyXG5cclxuLmZvcm0taW5wdXQge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IDhweCAxMHB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxufVxyXG5cclxuLmZvcm0taW5wdXQ6ZGlzYWJsZWQge1xyXG4gIGJhY2tncm91bmQ6ICNmMGYwZjA7XHJcbn1cclxuXHJcbi5mb3JtLWZvb3RlciB7XHJcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxufVxyXG5cclxuLmZvcmdvdC1wYXNzd29yZCB7XHJcbiAgZm9udC1zaXplOiAxM3B4O1xyXG4gIGNvbG9yOiAjNGY0NmU1O1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxufVxyXG5cclxuLmZvcmdvdC1wYXNzd29yZDpob3ZlciB7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbn1cclxuXHJcbi5idG4ge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gIGZvbnQtc2l6ZTogMTVweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgYm9yZGVyOiBub25lO1xyXG59XHJcblxyXG4uYnRuLXByaW1hcnkge1xyXG4gIGJhY2tncm91bmQ6ICM0ZjQ2ZTU7XHJcbiAgY29sb3I6ICNmZmY7XHJcbn1cclxuXHJcbi5idG4tcHJpbWFyeTpkaXNhYmxlZCB7XHJcbiAgYmFja2dyb3VuZDogI2E1YjRmYztcclxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG59XHJcblxyXG4uYnRuLW91dGxpbmUge1xyXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICM0ZjQ2ZTU7XHJcbiAgY29sb3I6ICM0ZjQ2ZTU7XHJcbn1cclxuXHJcbi5idG4tb3V0bGluZTpob3ZlciB7XHJcbiAgYmFja2dyb3VuZDogI2VlZjJmZjtcclxufVxyXG5cclxuLmRpdmlkZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBtYXJnaW46IDIwcHggMDtcclxuICBmb250LXNpemU6IDEzcHg7XHJcbiAgY29sb3I6ICM5OTk7XHJcbn1cclxuXHJcbi5kaXZpZGVyOjpiZWZvcmUsXHJcbi5kaXZpZGVyOjphZnRlciB7XHJcbiAgY29udGVudDogJyc7XHJcbiAgZmxleDogMTtcclxuICBoZWlnaHQ6IDFweDtcclxuICBiYWNrZ3JvdW5kOiAjZGRkO1xyXG4gIG1hcmdpbjogMCAxMHB4O1xyXG59XHJcblxyXG4ucmVnaXN0ZXItc2VjdGlvbiB7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4ucmVnaXN0ZXItdGV4dCB7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIGNvbG9yOiAjNTU1O1xyXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","errorMessage","LoginComponent","constructor","authService","router","loginData","email","password","loading","onLogin","login","subscribe","next","response","localStorage","setItem","access_token","decodedToken","JSON","parse","atob","split","role","is_admin","navigate","error","status","goToRegister","goToHome","ɵɵdirectiveInject","i1","AuthService","i2","Router","selectors","decls","vars","consts","template","LoginComponent_Template","rf","ctx","ɵɵlistener","LoginComponent_Template_button_click_2_listener","ɵɵtemplate","LoginComponent_div_13_Template","LoginComponent_Template_form_ngSubmit_14_listener","LoginComponent_Template_input_ngModelChange_21_listener","$event","LoginComponent_Template_input_ngModelChange_27_listener","LoginComponent_span_32_Template","LoginComponent_span_33_Template","LoginComponent_Template_button_click_40_listener","ɵɵproperty","_r1","valid"],"sources":["/home/feliban26/estudio_angular/proyecto_reservas/frontend/src/app/components/login/login.component.ts","/home/feliban26/estudio_angular/proyecto_reservas/frontend/src/app/components/login/login.component.html"],"sourcesContent":["// frontend/src/app/components/login/login.component.ts\r\nimport { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../services/auth.service';\r\nimport { UserLogin } from '../../models/user.model';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent {\r\n  // Modelo del formulario\r\n  loginData: UserLogin = {\r\n    email: '',\r\n    password: ''\r\n  };\r\n\r\n  // Estados del componente\r\n  loading = false;\r\n  errorMessage = '';\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  /**\r\n   * Maneja el submit del formulario de login\r\n   */\r\n  onLogin(): void {\r\n    // Validaciones básicas\r\n    if (!this.loginData.email || !this.loginData.password) {\r\n      this.errorMessage = 'Por favor completa todos los campos';\r\n      return;\r\n    }\r\n\r\n    this.loading = true;\r\n    this.errorMessage = '';\r\n\r\n    // Llamada al servicio de autenticación\r\n    this.authService.login(this.loginData).subscribe({\r\n      next: (response) => {\r\n        this.loading = false;\r\n\r\n        // Guarda token\r\n        localStorage.setItem('access_token', response.access_token);\r\n\r\n        // Si el usuario es admin, ir a /admin; si no, a /home\r\n        const decodedToken = JSON.parse(atob(response.access_token.split('.')[1]));\r\n        if (decodedToken.role === 1 || decodedToken.is_admin) {\r\n          this.router.navigate(['/admin']);\r\n        } else {\r\n          this.router.navigate(['/home']);\r\n        }\r\n      },\r\n      error: (error) => {\r\n        // Error: mostrar mensaje\r\n        this.loading = false;\r\n        if (error.status === 401) {\r\n          this.errorMessage = 'Email o contraseña incorrectos';\r\n        } else {\r\n          this.errorMessage = 'Error al iniciar sesión. Intenta nuevamente';\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Navega a la página de registro\r\n   */\r\n  goToRegister(): void {\r\n    this.router.navigate(['/register']);\r\n  }\r\n\r\n  /**\r\n   * Navega al home\r\n   */\r\n  goToHome(): void {\r\n    this.router.navigate(['/home']);\r\n  }\r\n}","<!-- frontend/src/app/components/login/login.component.html -->\r\n<div class=\"login-page\">\r\n  <div class=\"login-container\">\r\n    <!-- Botón volver -->\r\n    <button class=\"back-button\" (click)=\"goToHome()\">\r\n      ← Volver al inicio\r\n    </button>\r\n\r\n    <div class=\"login-card\">\r\n      <!-- Header -->\r\n      <div class=\"login-header\">\r\n        <div class=\"logo-circle\">\r\n          <span class=\"logo-icon\">💅</span>\r\n        </div>\r\n        <h1>Iniciar Sesión</h1>\r\n        <p>Accede a tu cuenta para gestionar tus reservas</p>\r\n      </div>\r\n\r\n      <!-- Mensaje de error -->\r\n      <div *ngIf=\"errorMessage\" class=\"alert alert-error\">\r\n        <span class=\"alert-icon\">⚠️</span>\r\n        <span>{{ errorMessage }}</span>\r\n      </div>\r\n\r\n      <!-- Formulario -->\r\n      <form (ngSubmit)=\"onLogin()\" #loginForm=\"ngForm\" class=\"login-form\">\r\n        <!-- Campo Email -->\r\n        <div class=\"form-group\">\r\n          <label for=\"email\">\r\n            <span class=\"label-icon\">📧</span>\r\n            Correo Electrónico\r\n          </label>\r\n          <input\r\n            type=\"email\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            [(ngModel)]=\"loginData.email\"\r\n            placeholder=\"tu@email.com\"\r\n            required\r\n            [disabled]=\"loading\"\r\n            class=\"form-input\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Campo Contraseña -->\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">\r\n            <span class=\"label-icon\">🔒</span>\r\n            Contraseña\r\n          </label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            [(ngModel)]=\"loginData.password\"\r\n            placeholder=\"••••••••\"\r\n            required\r\n            [disabled]=\"loading\"\r\n            class=\"form-input\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Forgot password link -->\r\n        <div class=\"form-footer\">\r\n          <a href=\"#\" class=\"forgot-password\">¿Olvidaste tu contraseña?</a>\r\n        </div>\r\n\r\n        <!-- Botón Submit -->\r\n        <button \r\n          type=\"submit\" \r\n          class=\"btn btn-primary btn-block\"\r\n          [disabled]=\"loading || !loginForm.valid\"\r\n        >\r\n          <span *ngIf=\"!loading\">Iniciar Sesión</span>\r\n          <span *ngIf=\"loading\">Iniciando sesión...</span>\r\n        </button>\r\n      </form>\r\n\r\n      <!-- Divider -->\r\n      <div class=\"divider\">\r\n        <span>o</span>\r\n      </div>\r\n\r\n      <!-- Link a registro -->\r\n      <div class=\"register-section\">\r\n        <p class=\"register-text\">\r\n          ¿No tienes cuenta?\r\n        </p>\r\n        <button class=\"btn btn-outline btn-block\" (click)=\"goToRegister()\">\r\n          Crear una cuenta nueva\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}